!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("react"),require("prop-types"),require("@mapbox/mapbox-gl-geocoder"),require("react-map-gl"),require("viewport-mercator-project"),require("mapbox-gl")):"function"==typeof define&&define.amd?define(["react","prop-types","@mapbox/mapbox-gl-geocoder","react-map-gl","viewport-mercator-project","mapbox-gl"],o):(e=e||self).reactMapGlGeocoder=o(e.react,e.propTypes,e.MapboxGeocoder,e.reactMapGl,e.viewportMercatorProject,e.mapboxgl)}(this,function(e,o,r,n,t,a){o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var c=["top-left","top-right","bottom-left","bottom-right"],l=function(e){var o,l;function i(){for(var o,l=arguments.length,i=new Array(l),u=0;u<l;u++)i[u]=arguments[u];return(o=e.call.apply(e,[this].concat(i))||this).geocoder=null,o.cachedResult=null,o.initializeGeocoder=function(){var e=o.getMapboxMap(),n=o.getContainerNode(),t=o.props,l=t.inputValue,i=t.render,u=t.getItemValue,p=t.onInit,d=t.position,s={accessToken:t.mapboxApiAccessToken,origin:t.origin,zoom:t.zoom,flyTo:!1,placeholder:t.placeholder,proximity:t.proximity,trackProximity:t.trackProximity,collapsed:t.collapsed,clearAndBlurOnEsc:t.clearAndBlurOnEsc,clearOnBlur:t.clearOnBlur,bbox:t.bbox,types:t.types,countries:t.countries,minLength:t.minLength,limit:t.limit,language:t.language,filter:t.filter,localGeocoder:t.localGeocoder,reverseGeocode:t.reverseGeocode,enableEventLogging:t.enableEventLogging,marker:t.marker,mapboxgl:a};i&&"function"==typeof i&&(s.render=i),u&&"function"==typeof u&&(s.getItemValue=u),o.geocoder=new r(s),o.subscribeEvents(),n?n.appendChild(o.geocoder.onAdd(e)):e.addControl(o.geocoder,c.find(function(e){return d===e})),null!=l?o.geocoder.setInput(l):o.cachedResult&&o.geocoder.setInput(o.cachedResult.place_name),(o.cachedResult||null!=l)&&o.showClearIcon(),p(o.geocoder)},o.showClearIcon=function(){o.geocoder._clearEl.style.display="block"},o.getMapboxMap=function(){var e=o.props.mapRef;return e&&e.current&&e.current.getMap()||null},o.getContainerNode=function(){var e=o.props.containerRef;return e&&e.current||null},o.subscribeEvents=function(){o.geocoder.on("clear",o.handleClear),o.geocoder.on("loading",o.handleLoading),o.geocoder.on("results",o.handleResults),o.geocoder.on("result",o.handleResult),o.geocoder.on("error",o.handleError)},o.unsubscribeEvents=function(){o.geocoder.off("clear",o.handleClear),o.geocoder.off("loading",o.handleLoading),o.geocoder.off("results",o.handleResults),o.geocoder.off("result",o.handleResult),o.geocoder.off("error",o.handleError)},o.removeGeocoder=function(){var e=o.getMapboxMap();o.unsubscribeEvents(),e&&e.removeControl&&o.getMapboxMap().removeControl(o.geocoder),o.geocoder=null},o.handleClear=function(){o.cachedResult=null,o.props.onClear()},o.handleLoading=function(e){o.props.onLoading(e)},o.handleResults=function(e){o.props.onResults(e)},o.handleResult=function(e){var r=e.result,a=o.props,c=a.onViewportChange,l=a.onResult,i=r.bbox,u=r.center,p=r.properties,d=(void 0===p?{}:p).short_code,s=u[0],g=u[1],f={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},m=o.getMapboxMap().getContainer().getBoundingClientRect(),b=m.width,h=m.height,y=o.geocoder.options.zoom,x=function(e,o){return new t(o).fitBounds(e)};try{!f[d]&&i?y=x([[i[0],i[1]],[i[2],i[3]]],{width:b,height:h}).zoom:f[d]&&(y=x(f[d].bbox,{width:b,height:h}).zoom)}catch(e){console.warn("following result caused an error when trying to zoom to bbox: ",r),y=o.geocoder.options.zoom}c({longitude:s,latitude:g,zoom:y,transitionInterpolator:new n.FlyToInterpolator,transitionDuration:3e3}),l(e),o.cachedResult=r,o.geocoder._typeahead.selected=null,o.showClearIcon()},o.handleError=function(e){o.props.onError(e)},o}l=e,(o=i).prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l;var u=i.prototype;return u.componentDidMount=function(){this.initializeGeocoder()},u.componentWillUnmount=function(){this.removeGeocoder()},u.componentDidUpdate=function(){this.removeGeocoder(),this.initializeGeocoder()},u.getGeocoder=function(){return this.geocoder},u.render=function(){return null},i}(e.PureComponent);return l.propTypes={mapRef:o.object.isRequired,containerRef:o.object,onViewportChange:o.func,mapboxApiAccessToken:o.string.isRequired,inputValue:o.string,origin:o.string,zoom:o.number,placeholder:o.string,proximity:o.object,trackProximity:o.bool,collapsed:o.bool,clearAndBlurOnEsc:o.bool,clearOnBlur:o.bool,bbox:o.array,types:o.string,countries:o.string,minLength:o.number,limit:o.number,language:o.string,filter:o.func,localGeocoder:o.func,reverseGeocode:o.bool,enableEventLogging:o.bool,marker:o.bool,render:o.func,getItemValue:o.func,position:o.oneOf(c),onInit:o.func,onClear:o.func,onLoading:o.func,onResults:o.func,onResult:o.func,onError:o.func},l.defaultProps={onViewportChange:function(){},origin:"https://api.mapbox.com",zoom:16,placeholder:"Search",trackProximity:!1,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,minLength:2,limit:5,reverseGeocode:!1,enableEventLogging:!0,marker:!0,position:"top-right",onInit:function(){},onClear:function(){},onLoading:function(){},onResults:function(){},onResult:function(){},onError:function(){}},l});
//# sourceMappingURL=index.umd.js.map
